<!DOCTYPE html>
<html>
<head>
<meta name=”viewport” content=”width=device-width, initial-scale=1">
<meta http-equiv=”Content-Type” content=”text/html; charset=utf-8" />
<title>IoTFMS Line Register</title>
<script src=”https://d.line-scdn.net/liff/1.0/sdk.js"></script>
<script src=”https://pongkmit.github.io/line-liff-starter/iotfms/lib/jquery-3.3.1.min.js”></script>
<script src=”https://pongkmit.github.io/line-liff-starter/iotfms/lib/bootstrap.min.js”></script>
<link href=”https://pongkmit.github.io/line-liff-starter/iotfms/lib/bootstrap.min.css” rel=”stylesheet” />
<script>
//init LIFF
function initializeApp(data) {
let urlParams = new URLSearchParams(window.location.search);
$(‘#name’).val(urlParams.toString());
$(‘#lineidtxt’).val(data.context.userId);
}
//ready
$(function () {
//init LIFF
liff.init(function (data) {
initializeApp(data);
});
//RegiterButton
$(‘#”registerBtn”).click(function () {
	$.ajax({
       type: 'POST',
       url: 'https://eb7e9f50.ngrok.io/api/LineBot/LineLogIn',
	   contentType: 'application/x-www-form-urlencoded',
	   dataType: 'json',
       data: {
         'EMAIL_ADDRESS': $("#emailtxt").val(),
		 'PASSWORD': $("#passwordtxt").val(),
		 'LINE_ID': $("#lineidtxt").val()
       },
       success: function (res) {
			if (response.didError) {
				window.alert("Register error: " + response.message);
			} 
			else {
				window.alert("You have successfully registered");
			}
       },
       error: function (res) {
			window.alert('Error : ' + res.status);
       },
       complete: function(data) {
       }
     });
});

});
</script>
</head>
<body>
<form >
<div class=”row”>
<div class=”col-md-6" style=”margin:5px”>
<input class=”form-control” type=”hidden” id=”lineidtxt” name=”lineidtxt” /> <br />
<label>Email Address</label>
<input class=”form-control” type=”text” id=”emailtxt” name=”emailtxt”/><br />
<label>Password</label>
<input class=”form-control” type=”text” id=”passwordtxt” name=”passwordtxt” /><br />
<button class=”btn btn-primary” id=”registerBtn”>Register</button>
</div>
</div>
</form>
</body>
</html>